{% load static %}
<html>
    <head>
        
        <!-- Bootstrap CSS -->

        <!-- Latest compiled and minified CSS -->
        <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->

        <!-- Optional theme -->
        <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">-->

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        
        <!-- My CSS -->
        <link rel="stylesheet" href="{% static 'css/fit.css' %}">

        <!-- Font Awesome Icons -->
        <script src="https://kit.fontawesome.com/aa6cd997fb.js"></script>

        <title>Cell Cycle Analyzer</title>
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6">
                    <div class="row justify-content-between align-items-center">
                        <div class="col-md-auto">
                            <h2>Cell Cycle Analyzer</h2>
                        </div>
                        <div class="col-md-auto">
                            <button type="button" class="btn btn-outline-info btn-sm" data-toggle="popover" data-placement="bottom" data-html="true"
                                data-content="Rode, J., Goerke, T., Brusch, L., Rost, F. (2019). How fast are cells dividing: Probabilistic model of continuous labeling assays. <em>bioRxiv.</em> <a <a target='_blank' rel='noopener noreferrer' href='https://www.biorxiv.org/content/10.1101/550574v1'>doi:10.1101/550574</a>.">
                                Cite us
                            </button>
                        </div>
                    </div>
                    <p class="lead">Calculate cell cycle parameters from continuous labeling assays</p>
                </div>
                <div class="col-md-6">
                    <a href="http://tu-dresden.de/die_tu_dresden/zentrale_einrichtungen/zih/"><img vspace="10" "Cellcycle Result" src="{% static "zihl.png" %}" /></a>
                    <a href="http://tu-dresden.de/"><img vspace="10" "Cellcycle Result" src="{% static "TUD.png" %}"  /></a>
            </div>
            </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
            <div class="row">
                <div class="col-md-6">
                <h3>Insert experimental data:</h3>
                    <!-- Form-->{% include "formset.html" %} 
            </div>
                        <div class="col-md-6">
                <h3>Or upload CSV file:</h3>
                <!-- Upload-->{% include "parts/upload_csv.html" %} 
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h1> </h1>
                    <!--<button class="btn btn-primary" type="button">Calculate</button>  -->
                </div>
            </div>
            <div class="row">
            <div class="col-md-6">
            <h3 id="result">Result:</h3>
            <p class="lead">Unbiased parameter estimates from stochastic model</p>
            <!-- Results table-->{% include "parts/results_table.html" %} 
            Results are rounded to the 6th decimal digit.
            </div>
                <div class="col-md-6">
            <!-- Result-->{% include "parts/result_img.html" %} 
                </div>
            </div>
        <div class="row">
            <div class="col-md-12">
                <h3>Help</h3>	
                <p> Our model is invariant for any time scale, so please enter all times in the same units (omitting this common unit).<br>
                    The estimated parameters <math>&tau;</math>, <math><msub><mover> <mi>&sigma;</mi> <mo>^</mo></mover> c </msub> </math> and <math>&sigma;</math> are returned in that same time unit (parameters <math>f</math>, <math>g</math> are unit-free fractions). <br>
                    Note the cell level variability <math><msub><mover> <mi>&sigma;</mi> <mo>^</mo></mover> c </msub> </math> is slightly different to the actual cell variability <math><msub><mi>&sigma;</mi> c </msub> </math>, see our publication for details. <br>
                    All user data are only temporally stored on our server as long as they are needed for the parameter estimation. <br>
                    Empty lines in table will be tolerated.
                </p>
                <p> If you used our tool please cite our publication: <a href="https://doi.org/10.1101/550574">Julian Rode, Torsten Goerke, Lutz Brusch and Fabian Rost (2019)<br> How fast are cells dividing: Probabilistic model of continuous labeling assays. bioRxiv doi:10.1101/550574</a> <br>
                    The web service uses our free and open source python tool: <a href="https://github.com/fabianrost84/clapy">https://github.com/fabianrost84/clapy</a>.</p>
                For questions or suggestion please write an email to <a href="mailto:julian.rode1@tu-dresden.de">julian.rode1@tu-dresden.de</a>. &emsp;  <a href="https://imc.zih.tu-dresden.de/imc/index.php?page=impressum">Impressum</a>
                <br>&emsp; 
            </div>
        </div>        


        <!--
        <ul>
            {% for name, result in fit.items %}
            <li>{{name}} - {{result.value}} - {{result.2sigma}}</li>
            {% endfor %}
        </ul>
        -->

        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

        <!-- Tooltips for field validation errors-->
        <script>
            $(function () {
                $('[data-toggle="tooltip"]').tooltip() // https://getbootstrap.com/docs/4.3/components/tooltips/#example-enable-tooltips-everywhere
            })
        </script>

        <!-- Popover for citation -->
        <script>
            $(function () {
                $('[data-toggle="popover"]').popover()
            })
        </script>

        <!-- Jump to results after calculation. -->
        {% if fit %}
            <script>
                window.location.hash="result"; // https://www.reddit.com/r/flask/comments/33rozw/af_is_it_possible_to_render_template_so_that_it/cqnt2r6/
            </script>
        {% endif %}

        <!-- Loading animation for buttons. -->
        <script>
            $('#btn-calc').click(function() { // https://mdbootstrap.com/docs/jquery/components/spinners/#buttons
                $('#btn-calc').html('<span class="spinner-grow spinner-grow-sm mr-2" role="status" aria-hidden="true"></span>Loading...').addClass('disabled'); // add spinner
                //$(this).prop("disabled", true); // disable button
            });
       
            $('#btn-upload').click(function() { // https://mdbootstrap.com/docs/jquery/components/spinners/#buttons
                var field = document.forms["upload_form"]["file"].value;
                if (field != "") {
                    $(this).html('<span class="spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span>Loading...').addClass('disabled');
                    //$(this).prop("disabled", true);
                }
            });
        </script>
    </body>
</html>